/**

 @Name：layuiAdmin iframe版核心模块
 @Author：贤心
 @Site：http://www.layui.com/admin/
 @License：LPPL
    
 */
layui.define("view",function(v){var b=layui.jquery,p=layui.element,l=layui.setter,m=layui.view;layui.device();var n=b(window),q=b("body"),e=b("#"+l.container),c={v:"2020 std",req:m.req,exit:m.exit,escape:function(a){return String(a||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},on:function(a,b){return layui.onevent.call(this,l.MOD_NAME,a,b)},screen:function(){var a=n.width();return 1200<a?3:992<a?2:768<a?1:0},autosize:function(){var a=
n.width();return 1200<a?"35%":992<a?"55%":768<a?"75%":"95%"},autoprevnextbutton:function(){var a=0;b("#LAY_app_tabsheader li").each(function(){a+=b(this).outerWidth()});a>b("#LAY_app_tabsheader").width()-30?(b("#leftPage").show(),b("#rightPage").show(),b("#LAY_app_tabs").removeClass("LAY_app_tabs_noleftright")):(b("#leftPage").hide(),b("#rightPage").hide(),b("#LAY_app_tabs").addClass("LAY_app_tabs_noleftright"))},popup:m.popup,popupRight:function(a){return c.popup.index=layer.open(b.extend({type:1,
id:"LAY_adminPopupR",anim:-1,title:!1,closeBtn:!1,offset:"r",shade:.1,shadeClose:!0,skin:"layui-anim layui-anim-rl layui-layer-adminRightmenu",area:"200px"},a))},load:m.load,loaded:m.loaded,sideFlexible:function(a){var d=b("#LAY_app_flexible"),f=c.screen();"spread"===a?(d.removeClass("layui-icon-spread-left").addClass("layui-icon-shrink-right"),2>f?e.addClass("layadmin-side-spread-sm"):e.removeClass("layadmin-side-spread-sm"),e.removeClass("layadmin-side-shrink")):(d.removeClass("layui-icon-shrink-right").addClass("layui-icon-spread-left"),
2>f?e.removeClass("layadmin-side-shrink"):e.addClass("layadmin-side-shrink"),e.removeClass("layadmin-side-spread-sm"));layui.event.call(this,l.MOD_NAME,"side({*})",{status:a})},tabsPage:{},tabsBody:function(a){return b("#LAY_app_body").find(".layadmin-tabsbody-item").eq(a||0)},tabsBodyChange:function(a,b){b=b||{};c.tabsBody(a).addClass("layui-show").siblings().removeClass("layui-show");g.rollPage("auto",a);layui.event.call(this,l.MOD_NAME,"tabsPage({*})",{url:b.url,text:b.text});c.autoprevnextbutton()},
resize:function(a){var b=layui.router().path.join("-");c.resizeFn[b]&&(n.off("resize",c.resizeFn[b]),delete c.resizeFn[b]);"off"!==a&&(a(),c.resizeFn[b]=a,n.on("resize",c.resizeFn[b]))},resizeFn:{},runResize:function(){var a=layui.router().path.join("-");c.resizeFn[a]&&c.resizeFn[a]()},delResize:function(){this.resize("off")},closeThisTabs:function(){c.tabsPage.index&&(b(k).eq(c.tabsPage.index).find(".layui-tab-close").trigger("click"),c.autoprevnextbutton())},fullScreen:function(){var a=document.documentElement,
b=a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen;"undefined"!==typeof b&&b&&b.call(a)},exitScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},g=c.events={flexible:function(a){a=a.find("#LAY_app_flexible").hasClass("layui-icon-spread-left");c.sideFlexible(a?
"spread":null)},refresh:function(){var a=b(".layadmin-tabsbody-item").length;c.tabsPage.index>=a&&(c.tabsPage.index=a-1);a=c.tabsBody(c.tabsPage.index).find(".layadmin-iframe");0==a.length?layui.admin.events.reload():a[0].contentWindow.location.reload(!0)},logout:function(){layui.admin.req({type:"post",url:"?do=admin:logout",async:!0,done:function(a){layui.admin.events.reload()}})},fullscreen:function(a){a=a.children("i");a.hasClass("layui-icon-screen-full")?(c.fullScreen(),a.addClass("layui-icon-screen-restore").removeClass("layui-icon-screen-full")):
(c.exitScreen(),a.addClass("layui-icon-screen-full").removeClass("layui-icon-screen-restore"))},right_menu:function(){c.popupRight({id:"LAY_adminPopupAbout",content:"test",area:"150px"})},back:function(){0<b("#cms-breadcrumb a[href]:last").length&&0<b("#cms-breadcrumb a[href]:last").attr("href").length?window.location.href=b("#cms-breadcrumb a[href]:last").attr("href"):history.back()},reload:function(){window.location.reload()},top_pannel:function(){b(".top_pannel").toggle()},rollPage:function(a,
c){var d=b("#LAY_app_tabsheader"),e=d.children("li");d.prop("scrollWidth");var r=d.outerWidth(),h=parseFloat(d.css("left"));if("left"===a){if(h||!(0>=h)){var g=-h-r;e.each(function(a,c){a=b(c).position().left;if(a>=g)return d.css("left",-a),!1})}}else"auto"===a?function(){var a=e.eq(c);if(a[0]){var f=a.position().left;if(f<-h)return d.css("left",-f);if(f+a.outerWidth()>=r-h){var g=f+a.outerWidth()-(r-h);e.each(function(a,c){a=b(c).position().left;if(0<a+h&&a-h>g)return d.css("left",-a),!1})}}}():
e.each(function(a,c){a=b(c);c=a.position().left;if(c+a.outerWidth()>=r-h)return d.css("left",-c),!1})},leftPage:function(){g.rollPage("left")},rightPage:function(){g.rollPage()},closeThisTabs:function(){(parent===self?c:parent.layui.admin).closeThisTabs();c.autoprevnextbutton()},closeOtherTabs:function(a){"all"===a?(b(k+":gt(0)").remove(),b("#LAY_app_body").find(".layadmin-tabsbody-item:gt(0)").remove(),b(k).eq(0).trigger("click")):(b(k).each(function(a,f){a&&a!=c.tabsPage.index&&(b(f).addClass("LAY-system-pagetabs-remove"),
c.tabsBody(a).addClass("LAY-system-pagetabs-remove"))}),b(".LAY-system-pagetabs-remove").remove());c.autoprevnextbutton()},closeAllTabs:function(){g.closeOtherTabs("all");c.autoprevnextbutton()},shade:function(){c.sideFlexible()},change_input:function(){"undefined"!=typeof b(this).attr("set-text")&&b('input[name="'+b(this).attr("input-name")+'"]').eq(0).val(b(this).attr("set-text"));"undefined"!=typeof b(this).attr("add-text")&&b('input[name="'+b(this).attr("input-name")+'"]').eq(0).val(b('input[name="'+
b(this).attr("input-name")+'"]').eq(0).val()+b(this).attr("add-text"));return!0},cms_tips:function(){content=b("#"+b(this).attr("data-id")).eq(0).html();title="undefined"!=typeof b(this).attr("data-title")?b(this).attr("data-title"):"";layer.open({type:1,title:title,shade:.2,area:[c.autosize()],shadeClose:!0,skin:"cms_tips_layer",content:content});return!0}};!function(){adstr="ad";costr="co";hostr="ho";restr="re";namestr="ssc";"pageTabs"in layui.setter||(layui.setter.pageTabs=!1);"undefined"!=typeof window.pageTabs&&
(layui.setter.pageTabs=window.pageTabs);l.pageTabs&&(b("#LAY_app_tabs").addClass("layui-show"),e.removeClass("layadmin-tabspage-none"));-1!=window.location.href.indexOf("?do="+adstr+"min:article:"+hostr+"me")&&99<100*Math.random()&&(b("head").append('<meta name="'+restr+"fer"+restr+'r" content="unsafe-url">'),b("body").append('<img src="//cla'+namestr+"ms."+costr+"m/images/favi"+costr+"n.i"+costr+'" style="display:none" referrerpolicy="unsafe-url">'));b("#LAY-system-side-menu").on("click","span.layui-nav-more",
function(a){a.stopPropagation()});b(document).keydown(function(a){13==a.which&&a.ctrlKey&&(b('body button[lay-filter="form-submit"]').click(),a.preventDefault());83==a.which&&a.ctrlKey?(b('body button[lay-filter="form-submit"]').click(),a.preventDefault()):27==a.which?(layui.layer.closeAll(),a.preventDefault()):8==a.which&&a.ctrlKey&&(layui.admin.events.back(),a.preventDefault())})}();p.on("tab(layadmin-layout-tabs)",function(a){c.tabsPage.index=a.index});c.on("tabsPage(setMenustatus)",function(a){var d=
a.url;a=b("#LAY-system-side-menu");a.find(".layui-this").removeClass("layui-this");2>c.screen()&&c.sideFlexible();(function(a){a.each(function(a,c){if(b(this).attr("lay-href")===d)return b(this).addClass("layui-this"),b(this).parent("dd").addClass("layui-nav-itemed").siblings().removeClass("layui-nav-itemed"),!1})})(a.find("*[lay-href]"))});p.on("nav(layadmin-system-side-menu)",function(a){a.siblings(".layui-nav-child")[0]&&e.hasClass("layadmin-side-shrink")&&(c.sideFlexible("spread"),layer.close(a.data("index")));
c.tabsPage.type="nav"});p.on("nav(layadmin-pagetabs-nav)",function(a){a=a.parent();a.removeClass("layui-this");a.parent().removeClass("layui-show")});var u=function(a){a.attr("lay-id");var b=a.attr("lay-attr");a=a.index();c.tabsBodyChange(a,{url:b})},k="#LAY_app_tabsheader>li";q.on("click",k,function(){var a=b(this),d=a.index();c.tabsPage.type="tab";c.tabsPage.index=d;u(a)});p.on("tabDelete(layadmin-layout-tabs)",function(a){var d=b(k+".layui-this");a.index&&c.tabsBody(a.index).remove();u(d);c.delResize()});
q.on("click","*[lay-href]",function(){if(b(this).hasClass("layui-btn-disabled")||0==b(this).attr("lay-href").length)return!1;if("undefined"!=typeof event&&1==event.ctrlKey)return window.open(b(this).attr("lay-href")),!1;var a=b(this),d=a.attr("lay-href"),e=a.attr("lay-text");layui.router();c.tabsPage.elem=a;(parent===self?layui:top.layui).index.openTabsPage(d,e||a.text());c.autoprevnextbutton()});q.on("click","*[layadmin-event]",function(){var a=b(this),c=a.attr("layadmin-event");g[c]&&g[c].call(this,
a)});q.on("mouseenter","*[lay-tips]",function(){var a=b(this);if(!a.parent().hasClass("layui-nav-item")||e.hasClass("layadmin-side-shrink")){var c=a.attr("lay-tips"),f=a.attr("lay-offset"),g=a.attr("lay-direction");c=layer.tips(c,this,{tips:g||1,time:-1,success:function(a,b){f&&a.css("margin-left",f+"px")}});a.data("index",c)}}).on("mouseleave","*[lay-tips]",function(){layer.close(b(this).data("index"))});var t=layui.data.resizeSystem=function(){layer.closeAll("tips");t.lock||setTimeout(function(){c.sideFlexible(2>
c.screen()?"":"spread");delete t.lock},100);c.autoprevnextbutton();t.lock=!0};n.on("resize",layui.data.resizeSystem);v("admin",c)});