/**

 @Name：layuiAdmin iframe版核心模块
 @Author：贤心
 @Site：http://www.layui.com/admin/
 @License：LPPL
    
 */


layui.define("view",function(z){var b=layui.jquery,u=layui.element,q=layui.setter,r=layui.view;layui.device();var t=b(window),v=b("body"),k=b("#"+q.container),c={v:"2020 std",req:r.req,exit:r.exit,escape:function(a){return String(a||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},on:function(a,d){return layui.onevent.call(this,q.MOD_NAME,a,d)},screen:function(){var a=t.width();return 1200<a?3:992<a?2:768<a?1:0},autosize:function(){var a=
t.width();return 1200<a?"35%":992<a?"55%":768<a?"75%":"95%"},autoprevnextbutton:function(){var a=0;b("#LAY_app_tabsheader li").each(function(){a+=b(this).outerWidth()});a>b("#LAY_app_tabsheader").width()-30?(b("#leftPage").show(),b("#rightPage").show(),b("#LAY_app_tabs").removeClass("LAY_app_tabs_noleftright")):(b("#leftPage").hide(),b("#rightPage").hide(),b("#LAY_app_tabs").addClass("LAY_app_tabs_noleftright"))},popup:r.popup,popupRight:function(a){return c.popup.index=layer.open(b.extend({type:1,
id:"LAY_adminPopupR",anim:-1,title:!1,closeBtn:!1,offset:"r",shade:.1,shadeClose:!0,skin:"layui-anim layui-anim-rl layui-layer-adminRightmenu",area:"200px"},a))},load:r.load,loaded:r.loaded,sideFlexible:function(a){var d=b("#LAY_app_flexible"),e=c.screen();"spread"===a?(d.removeClass("layui-icon-spread-left").addClass("layui-icon-shrink-right"),2>e?k.addClass("layadmin-side-spread-sm"):k.removeClass("layadmin-side-spread-sm"),k.removeClass("layadmin-side-shrink")):(d.removeClass("layui-icon-shrink-right").addClass("layui-icon-spread-left"),
2>e?k.removeClass("layadmin-side-shrink"):k.addClass("layadmin-side-shrink"),k.removeClass("layadmin-side-spread-sm"));layui.event.call(this,q.MOD_NAME,"side({*})",{status:a})},tabsPage:{},tabsBody:function(a){return b("#LAY_app_body").find(".layadmin-tabsbody-item").eq(a||0)},tabsBodyChange:function(a,d){d=d||{};c.tabsBody(a).addClass("layui-show").siblings().removeClass("layui-show");n.rollPage("auto",a);layui.event.call(this,q.MOD_NAME,"tabsPage({*})",{url:d.url,text:d.text});c.autoprevnextbutton()},
resize:function(a){var d=layui.router().path.join("-");c.resizeFn[d]&&(t.off("resize",c.resizeFn[d]),delete c.resizeFn[d]);"off"!==a&&(a(),c.resizeFn[d]=a,t.on("resize",c.resizeFn[d]))},resizeFn:{},runResize:function(){var a=layui.router().path.join("-");c.resizeFn[a]&&c.resizeFn[a]()},delResize:function(){this.resize("off")},closeThisTabs:function(){c.tabsPage.index&&(b(p).eq(c.tabsPage.index).find(".layui-tab-close").trigger("click"),c.autoprevnextbutton())},fullScreen:function(){var a=document.documentElement,
d=a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen;"undefined"!==typeof d&&d&&d.call(a)},exitScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},n=c.events={flexible:function(a){a=a.find("#LAY_app_flexible").hasClass("layui-icon-spread-left");c.sideFlexible(a?
"spread":null)},refresh:function(){var a=b(".layadmin-tabsbody-item").length;c.tabsPage.index>=a&&(c.tabsPage.index=a-1);a=c.tabsBody(c.tabsPage.index).find(".layadmin-iframe");0==a.length?layui.admin.events.reload():(b(".layui-nav-item a[layadmin-event=refresh] i").addClass("layui-anim layui-anim-rotate layui-anim-loop"),a[0].contentWindow.location.reload(!0),a[0].onload=function(){setTimeout(function(){b(".layui-nav-item a[layadmin-event=refresh] i").removeClass("layui-anim layui-anim-rotate layui-anim-loop")},
800)})},logout:function(){layui.admin.req({type:"post",url:"?do=admin:logout",async:!0,done:function(a){layui.admin.events.reload()}})},fullscreen:function(a){a=a.children("i");a.hasClass("layui-icon-screen-full")?(c.fullScreen(),a.addClass("layui-icon-screen-restore").removeClass("layui-icon-screen-full")):(c.exitScreen(),a.addClass("layui-icon-screen-full").removeClass("layui-icon-screen-restore"))},right_menu:function(){c.popupRight({id:"LAY_adminPopupAbout",content:"test",area:"150px"})},back:function(){0<
b("#cms-breadcrumb a[href]:last").length&&0<b("#cms-breadcrumb a[href]:last").attr("href").length?window.location.href=b("#cms-breadcrumb a[href]:last").attr("href"):history.back()},reload:function(){window.location.reload()},top_pannel:function(){b(".top_pannel").toggle()},rollPage:function(a,d){var e=b("#LAY_app_tabsheader"),l=e.children("li");e.prop("scrollWidth");var m=e.outerWidth(),h=parseFloat(e.css("left"));if("left"===a){if(h||!(0>=h)){var A=-h-m;l.each(function(f,g){f=b(g).position().left;
if(f>=A)return e.css("left",-f),!1})}}else"auto"===a?function(){var f=l.eq(d);if(f[0]){var g=f.position().left;if(g<-h)return e.css("left",-g);if(g+f.outerWidth()>=m-h){var B=g+f.outerWidth()-(m-h);l.each(function(w,C){w=b(C).position().left;if(0<w+h&&w-h>B)return e.css("left",-w),!1})}}}():l.each(function(f,g){f=b(g);g=f.position().left;if(g+f.outerWidth()>=m-h)return e.css("left",-g),!1})},leftPage:function(){n.rollPage("left")},rightPage:function(){n.rollPage()},closeThisTabs:function(){(parent===
self?c:parent.layui.admin).closeThisTabs();c.autoprevnextbutton()},closeOtherTabs:function(a){"all"===a?(b(p+":gt(0)").remove(),b("#LAY_app_body").find(".layadmin-tabsbody-item:gt(0)").remove(),b(p).eq(0).trigger("click")):(b(p).each(function(d,e){d&&d!=c.tabsPage.index&&(b(e).addClass("LAY-system-pagetabs-remove"),c.tabsBody(d).addClass("LAY-system-pagetabs-remove"))}),b(".LAY-system-pagetabs-remove").remove());c.autoprevnextbutton()},closeAllTabs:function(){n.closeOtherTabs("all");c.autoprevnextbutton()},
shade:function(){c.sideFlexible()},change_input:function(){"undefined"!=typeof b(this).attr("set-text")&&b('input[name="'+b(this).attr("input-name")+'"]').eq(0).val(b(this).attr("set-text"));"undefined"!=typeof b(this).attr("add-text")&&b('input[name="'+b(this).attr("input-name")+'"]').eq(0).val(b('input[name="'+b(this).attr("input-name")+'"]').eq(0).val()+b(this).attr("add-text"));return!0},cms_tips:function(){content=b("#"+b(this).attr("data-id")).eq(0).html();title="undefined"!=typeof b(this).attr("data-title")?
b(this).attr("data-title"):"";layer.open({type:1,title:title,shade:.2,area:[c.autosize()],shadeClose:!0,skin:"cms_tips_layer",content:content});return!0}};!function(){adstr="ad";costr="co";hostr="ho";restr="re";namestr="ssc";"pageTabs"in layui.setter||(layui.setter.pageTabs=!1);"undefined"!=typeof window.pageTabs&&(layui.setter.pageTabs=window.pageTabs);q.pageTabs&&(b("#LAY_app_tabs").addClass("layui-show"),k.removeClass("layadmin-tabspage-none"));-1!=window.location.href.indexOf("?do="+adstr+"min:article:"+
hostr+"me")&&99<100*Math.random()&&(b("head").append('<meta name="'+restr+"fer"+restr+'r" content="unsafe-url">'),b("body").append('<img src="//cla'+namestr+"ms."+costr+"m/images/favi"+costr+"n.i"+costr+'" style="display:none" referrerpolicy="unsafe-url">'));b("#LAY-system-side-menu").on("click","span.layui-nav-more",function(a){a.stopPropagation()});b(document).keydown(function(a){13==a.which&&a.ctrlKey&&(b('body button[lay-filter="form-submit"]').click(),a.preventDefault());83==a.which&&a.ctrlKey?
(b('body button[lay-filter="form-submit"]').click(),a.preventDefault()):27==a.which?(layui.layer.closeAll(),a.preventDefault()):8==a.which&&a.ctrlKey&&(layui.admin.events.back(),a.preventDefault())})}();u.on("tab(layadmin-layout-tabs)",function(a){c.tabsPage.index=a.index});c.on("tabsPage(setMenustatus)",function(a){var d=a.url;a=b("#LAY-system-side-menu");a.find(".layui-this").removeClass("layui-this");2>c.screen()&&c.sideFlexible();(function(e){e.each(function(l,m){if(b(this).attr("lay-href")===
d)return b(this).addClass("layui-this"),b(this).parent("dd").addClass("layui-nav-itemed").siblings().removeClass("layui-nav-itemed"),!1})})(a.find("*[lay-href]"))});u.on("nav(layadmin-system-side-menu)",function(a){a.siblings(".layui-nav-child")[0]&&k.hasClass("layadmin-side-shrink")&&(c.sideFlexible("spread"),layer.close(a.data("index")));c.tabsPage.type="nav"});u.on("nav(layadmin-pagetabs-nav)",function(a){a=a.parent();a.removeClass("layui-this");a.parent().removeClass("layui-show")});var y=function(a){a.attr("lay-id");
var d=a.attr("lay-attr");a=a.index();c.tabsBodyChange(a,{url:d})},p="#LAY_app_tabsheader>li";v.on("click",p,function(){var a=b(this),d=a.index();c.tabsPage.type="tab";c.tabsPage.index=d;y(a)});u.on("tabDelete(layadmin-layout-tabs)",function(a){var d=b(p+".layui-this");a.index&&c.tabsBody(a.index).remove();y(d);c.delResize()});v.on("click","*[lay-href]",function(){if(b(this).hasClass("layui-btn-disabled")||0==b(this).attr("lay-href").length)return!1;if("undefined"!=typeof event&&1==event.ctrlKey)return window.open(b(this).attr("lay-href")),
!1;var a=b(this),d=a.attr("lay-href"),e=a.attr("lay-text");layui.router();c.tabsPage.elem=a;(parent===self?layui:top.layui).index.openTabsPage(d,e||a.text());c.autoprevnextbutton()});v.on("click","*[layadmin-event]",function(){var a=b(this),d=a.attr("layadmin-event");n[d]&&n[d].call(this,a)});v.on("mouseenter","*[lay-tips]",function(){var a=b(this);if(!a.parent().hasClass("layui-nav-item")||k.hasClass("layadmin-side-shrink")){var d=a.attr("lay-tips"),e=a.attr("lay-offset"),l=a.attr("lay-direction");
d=layer.tips(d,this,{tips:l||1,time:-1,success:function(m,h){e&&m.css("margin-left",e+"px")}});a.data("index",d)}}).on("mouseleave","*[lay-tips]",function(){layer.close(b(this).data("index"))});var x=layui.data.resizeSystem=function(){layer.closeAll("tips");x.lock||setTimeout(function(){c.sideFlexible(2>c.screen()?"":"spread");delete x.lock},100);c.autoprevnextbutton();x.lock=!0};t.on("resize",layui.data.resizeSystem);z("admin",c)});